<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>职业性格测评 | MBTI与霍兰德综合测试</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
        }

        :root {
            --primary: #2c3e50;
            --secondary: #3498db;
            --accent: #e74c3c;
            --light: #ecf0f1;
            --dark: #2c3e50;
            --success: #27ae60;
            --warning: #f39c12;
            --gray: #95a5a6;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .container {
            max-width: 1000px;
            width: 100%;
            background: white;
            border-radius: 12px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }

        .header {
            background: var(--primary);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
        }

        .header h1 {
            font-size: 2.2em;
            margin-bottom: 10px;
            font-weight: 300;
        }

        .header p {
            opacity: 0.9;
            font-size: 1.1em;
        }

        .logo {
            position: absolute;
            top: 20px;
            left: 30px;
            font-size: 1.8em;
            font-weight: bold;
            color: var(--light);
        }

        .progress-container {
            padding: 15px 30px;
            background: var(--light);
        }

        .progress-info {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            font-size: 0.9em;
            color: var(--dark);
        }

        .progress-bar {
            height: 8px;
            background: #dcdde1;
            border-radius: 4px;
            overflow: hidden;
        }

        .progress {
            height: 100%;
            background: linear-gradient(90deg, var(--secondary), var(--success));
            transition: width 0.5s ease;
            width: 0%;
        }

        .timer {
            text-align: center;
            font-size: 0.9em;
            color: var(--dark);
            margin-top: 5px;
        }

        .content {
            padding: 40px;
            min-height: 500px;
        }

        .section {
            display: none;
        }

        .section.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .welcome-text {
            text-align: center;
            margin-bottom: 30px;
        }

        .welcome-text h2 {
            color: var(--primary);
            margin-bottom: 15px;
        }

        .welcome-text p {
            line-height: 1.6;
            color: #555;
            margin-bottom: 10px;
        }

        .test-selection {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .test-card {
            background: white;
            border-radius: 8px;
            padding: 25px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            border: 2px solid transparent;
            transition: all 0.3s ease;
            cursor: pointer;
            text-align: center;
        }

        .test-card:hover {
            transform: translateY(-5px);
            border-color: var(--secondary);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }

        .test-card.selected {
            border-color: var(--secondary);
            background: #f8fafc;
        }

        .test-icon {
            font-size: 2.5em;
            color: var(--secondary);
            margin-bottom: 15px;
        }

        .test-card h3 {
            color: var(--primary);
            margin-bottom: 10px;
        }

        .test-card p {
            color: #666;
            font-size: 0.95em;
            line-height: 1.5;
        }

        .question-container {
            margin-bottom: 30px;
        }

        .question {
            font-size: 1.3em;
            margin-bottom: 25px;
            line-height: 1.6;
            color: var(--primary);
            font-weight: 500;
        }

        .options {
            display: grid;
            gap: 12px;
            margin-bottom: 30px;
        }

        .option {
            padding: 16px 20px;
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: #f8f9fa;
            display: flex;
            align-items: center;
        }

        .option:hover {
            border-color: var(--secondary);
            background: #e3f2fd;
            transform: translateY(-2px);
        }

        .option.selected {
            border-color: var(--secondary);
            background: var(--secondary);
            color: white;
        }

        .option-number {
            display: inline-flex;
            justify-content: center;
            align-items: center;
            width: 30px;
            height: 30px;
            background: #e0e0e0;
            border-radius: 50%;
            margin-right: 15px;
            font-weight: bold;
            transition: all 0.3s ease;
        }

        .option.selected .option-number {
            background: white;
            color: var(--secondary);
        }

        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .btn {
            padding: 12px 30px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 1em;
            font-weight: 500;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
        }

        .btn i {
            margin-right: 8px;
        }

        .btn-primary {
            background: var(--secondary);
            color: white;
        }

        .btn-primary:hover:not(:disabled) {
            background: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
        }

        .btn-secondary {
            background: var(--gray);
            color: white;
        }

        .btn-secondary:hover {
            background: #7f8c8d;
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-success:hover {
            background: #219a52;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(39, 174, 96, 0.4);
        }

        .btn:disabled {
            background: #bdc3c7;
            cursor: not-allowed;
            transform: none;
            box-shadow: none;
        }

        .result-container {
            text-align: center;
        }

        .result-header {
            margin-bottom: 30px;
        }

        .result-header h2 {
            color: var(--primary);
            margin-bottom: 10px;
        }

        .result-codes {
            display: flex;
            justify-content: center;
            gap: 30px;
            margin: 30px 0;
        }

        .code-card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            min-width: 150px;
        }

        .code-card h3 {
            color: var(--primary);
            margin-bottom: 10px;
            font-size: 1.1em;
        }

        .code-value {
            font-size: 2.5em;
            font-weight: bold;
            color: var(--secondary);
        }

        .chart-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            margin: 40px 0;
        }

        .chart-card {
            background: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
        }

        .chart-card h3 {
            color: var(--primary);
            margin-bottom: 15px;
            text-align: center;
        }

        .type-description {
            text-align: left;
            margin: 30px 0;
            padding: 25px;
            background: #f8f9fa;
            border-radius: 8px;
            border-left: 4px solid var(--secondary);
        }

        .recommendations {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 20px;
        }

        .recommendation-card {
            padding: 20px;
            background: white;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            text-align: left;
            transition: all 0.3s ease;
        }

        .recommendation-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.1);
            border-color: var(--secondary);
        }

        .recommendation-card h4 {
            color: var(--primary);
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }

        .recommendation-card h4 i {
            margin-right: 10px;
            color: var(--secondary);
        }

        .footer {
            text-align: center;
            padding: 20px;
            background: var(--light);
            color: var(--dark);
            font-size: 0.9em;
        }

        .test-info {
            text-align: center;
            margin: 15px 0;
            color: var(--gray);
            font-size: 0.9em;
        }

        @media (max-width: 768px) {
            .content {
                padding: 20px;
            }
            
            .test-selection {
                grid-template-columns: 1fr;
            }
            
            .result-codes {
                flex-direction: column;
                align-items: center;
                gap: 15px;
            }
            
            .chart-container {
                grid-template-columns: 1fr;
            }
            
            .header h1 {
                font-size: 1.8em;
            }
            
            .logo {
                position: relative;
                top: 0;
                left: 0;
                margin-bottom: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">CareerMatch</div>
            <h1>职业性格测评</h1>
            <p>MBTI与霍兰德综合测试 - 发现最适合您的职业方向</p>
        </div>
        
        <div class="progress-container">
            <div class="progress-info">
                <span id="progress-text">选择测试类型</span>
                <span id="progress-percent">0%</span>
            </div>
            <div class="progress-bar">
                <div class="progress" id="progress"></div>
            </div>
            <div class="timer" id="timer">用时: 00:00</div>
        </div>
        
        <div class="content">
            <!-- 欢迎页面 -->
            <div class="section active" id="welcome-section">
                <div class="welcome-text">
                    <h2>欢迎参加职业性格综合测评</h2>
                    <p>本测试结合了MBTI性格类型和霍兰德职业兴趣理论，通过科学的评估帮助您：</p>
                    <p>• 了解自己的性格特点和职业兴趣</p>
                    <p>• 发现最适合您的职业方向和工作环境</p>
                    <p>• 获得个性化的职业发展建议</p>
                    <div class="test-info">
                        <p><strong>MBTI测试：50题 | 霍兰德测试：60题</strong></p>
                        <p>测试大约需要20-25分钟完成。请根据您的真实感受选择答案。</p>
                    </div>
                </div>
                
                <div class="test-selection">
                    <div class="test-card" id="holland-test">
                        <div class="test-icon">
                            <i class="fas fa-tools"></i>
                        </div>
                        <h3>霍兰德职业兴趣测试</h3>
                        <p>评估您的职业兴趣类型，发现最适合的工作领域和环境。</p>
                        <div class="test-info">60题 | 约10-12分钟</div>
                    </div>
                    
                    <div class="test-card" id="mbti-test">
                        <div class="test-icon">
                            <i class="fas fa-user-friends"></i>
                        </div>
                        <h3>MBTI性格类型测试</h3>
                        <p>分析您的性格偏好，了解个人工作风格和沟通方式。</p>
                        <div class="test-info">50题 | 约10-12分钟</div>
                    </div>
                </div>
                
                <div class="nav-buttons">
                    <div></div>
                    <button class="btn btn-primary" id="start-btn" disabled>
                        <i class="fas fa-play"></i>开始测试
                    </button>
                </div>
            </div>

            <!-- MBTI测试页面 -->
            <div class="section" id="mbti-test-section">
                <div class="question-container">
                    <div class="question" id="mbti-question-text"></div>
                    <div class="options" id="mbti-options-container"></div>
                </div>
                
                <div class="nav-buttons">
                    <button class="btn btn-secondary" id="mbti-prev-btn">
                        <i class="fas fa-arrow-left"></i>上一题
                    </button>
                    <button class="btn btn-primary" id="mbti-next-btn">
                        下一题<i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- 霍兰德测试页面 -->
            <div class="section" id="holland-test-section">
                <div class="question-container">
                    <div class="question" id="holland-question-text"></div>
                    <div class="options" id="holland-options-container"></div>
                </div>
                
                <div class="nav-buttons">
                    <button class="btn btn-secondary" id="holland-prev-btn">
                        <i class="fas fa-arrow-left"></i>上一题
                    </button>
                    <button class="btn btn-primary" id="holland-next-btn">
                        下一题<i class="fas fa-arrow-right"></i>
                    </button>
                </div>
            </div>

            <!-- 结果页面 -->
            <div class="section" id="result-section">
                <div class="result-container">
                    <div class="result-header">
                        <h2>您的职业性格分析报告</h2>
                        <p>基于MBTI性格类型和霍兰德职业兴趣测试的综合评估</p>
                    </div>
                    
                    <div class="result-codes">
                        <div class="code-card">
                            <h3>MBTI类型</h3>
                            <div class="code-value" id="mbti-code">-</div>
                        </div>
                        <div class="code-card">
                            <h3>霍兰德代码</h3>
                            <div class="code-value" id="holland-code">-</div>
                        </div>
                    </div>
                    
                    <div class="chart-container">
                        <div class="chart-card">
                            <h3>MBTI性格维度</h3>
                            <canvas id="mbtiChart"></canvas>
                        </div>
                        <div class="chart-card">
                            <h3>霍兰德兴趣分布</h3>
                            <canvas id="hollandChart"></canvas>
                        </div>
                    </div>
                    
                    <div class="type-description" id="combined-description"></div>
                    
                    <h3>推荐职业方向</h3>
                    <div class="recommendations" id="career-recommendations"></div>
                    
                    <div class="nav-buttons" style="justify-content: center; margin-top: 40px;">
                        <button class="btn btn-success" id="restart-btn">
                            <i class="fas fa-redo"></i>重新测试
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="footer">
            <p>© 2023 CareerMatch 职业性格测评 | 测试结果仅供参考，职业选择请结合个人实际情况</p>
        </div>
    </div>

    <script>
        // 完整的测试数据
        const tests = {
            holland: {
                name: "霍兰德职业兴趣测试",
                questions: [
                    // 现实型 (R) 问题
                    { question: "你喜欢修理电器或机械物品吗？", type: "R" },
                    { question: "你喜欢动手制作或修理物品吗？", type: "R" },
                    { question: "你喜欢户外活动和体力劳动吗？", type: "R" },
                    { question: "你喜欢使用工具或机器工作吗？", type: "R" },
                    { question: "你喜欢观察机械如何运作吗？", type: "R" },
                    { question: "你喜欢从事农业或园艺活动吗？", type: "R" },
                    { question: "你喜欢动手解决实际问题吗？", type: "R" },
                    { question: "你喜欢操作设备或仪器吗？", type: "R" },
                    { question: "你喜欢建造或修理东西吗？", type: "R" },
                    { question: "你喜欢从事需要体力的工作吗？", type: "R" },
                    
                    // 研究型 (I) 问题
                    { question: "你喜欢进行科学实验吗？", type: "I" },
                    { question: "你喜欢阅读科学或技术类书籍吗？", type: "I" },
                    { question: "你喜欢分析和解决复杂问题吗？", type: "I" },
                    { question: "你喜欢独立工作和思考吗？", type: "I" },
                    { question: "你喜欢探索未知领域吗？", type: "I" },
                    { question: "你喜欢研究理论和概念吗？", type: "I" },
                    { question: "你喜欢观察和分析数据吗？", type: "I" },
                    { question: "你喜欢解决智力挑战吗？", type: "I" },
                    { question: "你喜欢探索事物的原理吗？", type: "I" },
                    { question: "你喜欢进行逻辑推理吗？", type: "I" },
                    
                    // 艺术型 (A) 问题
                    { question: "你喜欢绘画、设计或创作艺术品吗？", type: "A" },
                    { question: "你喜欢写作、诗歌或剧本创作吗？", type: "A" },
                    { question: "你喜欢音乐创作或表演吗？", type: "A" },
                    { question: "你喜欢设计服装或装饰吗？", type: "A" },
                    { question: "你喜欢摄影或摄像吗？", type: "A" },
                    { question: "你喜欢舞蹈或戏剧表演吗？", type: "A" },
                    { question: "你喜欢创意写作吗？", type: "A" },
                    { question: "你喜欢参观艺术展览吗？", type: "A" },
                    { question: "你喜欢设计网页或图形吗？", type: "A" },
                    { question: "你喜欢创造新颖的想法吗？", type: "A" },
                    
                    // 社会型 (S) 问题
                    { question: "你乐于帮助他人解决个人问题吗？", type: "S" },
                    { question: "你喜欢教导或培训他人吗？", type: "S" },
                    { question: "你喜欢照顾他人吗？", type: "S" },
                    { question: "你喜欢参与社区服务吗？", type: "S" },
                    { question: "你喜欢与他人合作完成工作吗？", type: "S" },
                    { question: "你喜欢调解冲突吗？", type: "S" },
                    { question: "你喜欢组织团体活动吗？", type: "S" },
                    { question: "你喜欢倾听他人的烦恼吗？", type: "S" },
                    { question: "你喜欢提供咨询和建议吗？", type: "S" },
                    { question: "你喜欢在团队中工作吗？", type: "S" },
                    
                    // 企业型 (E) 问题
                    { question: "你喜欢说服和影响他人吗？", type: "E" },
                    { question: "你喜欢领导和组织他人吗？", type: "E" },
                    { question: "你喜欢销售产品或服务吗？", type: "E" },
                    { question: "你喜欢参与竞争性活动吗？", type: "E" },
                    { question: "你喜欢在公众面前演讲吗？", type: "E" },
                    { question: "你喜欢创业或经营企业吗？", type: "E" },
                    { question: "你喜欢制定计划和策略吗？", type: "E" },
                    { question: "你喜欢承担风险和挑战吗？", type: "E" },
                    { question: "你喜欢激励和鼓舞他人吗？", type: "E" },
                    { question: "你喜欢谈判和达成协议吗？", type: "E" },
                    
                    // 常规型 (C) 问题
                    { question: "你擅长整理文件和数据处理吗？", type: "C" },
                    { question: "你喜欢遵循明确的指令工作吗？", type: "C" },
                    { question: "你喜欢保持工作环境整洁有序吗？", type: "C" },
                    { question: "你喜欢记录和整理信息吗？", type: "C" },
                    { question: "你喜欢处理数字和统计数据吗？", type: "C" },
                    { question: "你喜欢制定和遵循计划吗？", type: "C" },
                    { question: "你喜欢确保工作准确无误吗？", type: "C" },
                    { question: "你喜欢使用计算机处理数据吗？", type: "C" },
                    { question: "你喜欢维护系统和流程吗？", type: "C" },
                    { question: "你喜欢有规律和可预测的工作吗？", type: "C" }
                ],
                typeInfo: {
                    R: { name: "现实型", desc: "喜欢动手操作、使用工具和机器，偏好户外和体力活动，务实、稳重。" },
                    I: { name: "研究型", desc: "喜欢观察、学习、分析和解决问题，偏好独立工作和智力挑战。" },
                    A: { name: "艺术型", desc: "喜欢创造性的表达，具有想象力、情感丰富，偏好非结构化的工作环境。" },
                    S: { name: "社会型", desc: "喜欢帮助、教导和服务他人，善于沟通和理解他人感受。" },
                    E: { name: "企业型", desc: "喜欢领导、说服和影响他人，具有冒险精神和竞争意识。" },
                    C: { name: "常规型", desc: "喜欢有条理、系统化的工作，注重细节和准确性，偏好结构化环境。" }
                },
                careers: {
                    R: ["机械工程师", "电气技师", "建筑师", "运动员", "木匠", "飞行员", "农民", "警察", "消防员", "地质学家"],
                    I: ["科学家", "研究员", "程序员", "医生", "大学教授", "数据分析师", "心理学家", "药剂师", "工程师", "数学家"],
                    A: ["设计师", "音乐家", "作家", "演员", "摄影师", "艺术家", "建筑师", "广告创意", "导演", "编辑"],
                    S: ["教师", "心理咨询师", "护士", "社会工作者", "人力资源", "顾问", "牧师", "教练", "医生", "职业顾问"],
                    E: ["企业家", "销售经理", "律师", "政治家", "市场总监", "项目经理", "房地产经纪人", "公关专员", "业务主管", "管理人员"],
                    C: ["会计师", "行政助理", "图书管理员", "银行职员", "数据分析师", "审计员", "秘书", "税务专员", "档案管理员", "办公室经理"]
                }
            },
            mbti: {
                name: "MBTI性格类型测试",
                questions: [
                    // 外向(E) vs 内向(I) 维度
                    { question: "在社交场合中，你通常：", dimension: "EI", optionA: "主动与他人交谈，结识新朋友", optionB: "等待别人先开口，与熟悉的人交流" },
                    { question: "当你感到疲惫时，你更倾向于：", dimension: "EI", optionA: "与他人相处来恢复精力", optionB: "独自休息来恢复精力" },
                    { question: "你更喜欢的工作方式是：", dimension: "EI", optionA: "团队合作，与他人讨论", optionB: "独立工作，自己思考" },
                    { question: "在聚会中，你通常：", dimension: "EI", optionA: "是活跃的中心人物", optionB: "是安静的观察者" },
                    { question: "你更倾向于通过什么方式思考：", dimension: "EI", optionA: "说出来，与他人讨论", optionB: "在内心思考，不轻易表达" },
                    { question: "你更喜欢哪种学习方式：", dimension: "EI", optionA: "小组讨论和实践", optionB: "独自阅读和研究" },
                    { question: "你如何做出决定：", dimension: "EI", optionA: "快速决定，可以随时调整", optionB: "深思熟虑，考虑各种可能" },
                    { question: "你更愿意参加：", dimension: "EI", optionA: "大型社交活动", optionB: "小型亲密聚会" },
                    { question: "你更倾向于：", dimension: "EI", optionA: "广度，了解很多事情", optionB: "深度，深入了解少数事情" },
                    { question: "你如何表达想法：", dimension: "EI", optionA: "直接表达，边说边想", optionB: "先想清楚再表达" },
                    { question: "你更喜欢的工作环境：", dimension: "EI", optionA: "开放、互动的办公室", optionB: "安静、私人的空间" },
                    { question: "你如何应对压力：", dimension: "EI", optionA: "寻求他人支持和帮助", optionB: "自己处理，不轻易求助" },
                    
                    // 实感(S) vs 直觉(N) 维度
                    { question: "当你学习新知识时，你更注重：", dimension: "SN", optionA: "具体事实和实际应用", optionB: "整体概念和未来可能性" },
                    { question: "你更相信：", dimension: "SN", optionA: "经验和实际数据", optionB: "直觉和灵感" },
                    { question: "你更喜欢：", dimension: "SN", optionA: "按部就班执行计划", optionB: "灵活应对变化" },
                    { question: "你更关注：", dimension: "SN", optionA: "当前的实际问题", optionB: "未来的发展可能" },
                    { question: "你更擅长：", dimension: "SN", optionA: "处理具体细节", optionB: "把握整体大局" },
                    { question: "你更喜欢的工作是：", dimension: "SN", optionA: "有明确标准和流程", optionB: "有创造性和变化性" },
                    { question: "你更倾向于：", dimension: "SN", optionA: "基于事实做决定", optionB: "基于可能性做决定" },
                    { question: "你更喜欢：", dimension: "SN", optionA: "实际、具体的描述", optionB: "隐喻、象征的表达" },
                    { question: "你更关注：", dimension: "SN", optionA: "现实和现状", optionB: "潜力和未来" },
                    { question: "你更相信：", dimension: "SN", optionA: "亲眼所见的事实", optionB: "直觉感受到的可能性" },
                    { question: "你更擅长：", dimension: "SN", optionA: "执行具体任务", optionB: "构想新想法" },
                    { question: "你更喜欢：", dimension: "SN", optionA: "明确、具体的指示", optionB: "灵活、开放的任务" },
                    
                    // 思考(T) vs 情感(F) 维度
                    { question: "做决定时，你更倾向于：", dimension: "TF", optionA: "基于逻辑和客观分析", optionB: "考虑他人感受和价值观" },
                    { question: "你更看重：", dimension: "TF", optionA: "真理和公正", optionB: "和谐和同情" },
                    { question: "你更倾向于：", dimension: "TF", optionA: "直接指出问题", optionB: "委婉表达意见" },
                    { question: "你更注重：", dimension: "TF", optionA: "客观标准和原则", optionB: "主观价值和关系" },
                    { question: "你更擅长：", dimension: "TF", optionA: "分析问题和找出漏洞", optionB: "理解他人和建立关系" },
                    { question: "在批评他人时，你更倾向于：", dimension: "TF", optionA: "直接指出错误", optionB: "考虑对方感受" },
                    { question: "你更看重：", dimension: "TF", optionA: "能力和效率", optionB: "情感和人际关系" },
                    { question: "你更倾向于：", dimension: "TF", optionA: "坚持原则和标准", optionB: "适应情况和人情" },
                    { question: "你更注重：", dimension: "TF", optionA: "事实和逻辑", optionB: "价值观和感受" },
                    { question: "在团队中，你更关注：", dimension: "TF", optionA: "任务完成和目标达成", optionB: "团队和谐和成员感受" },
                    { question: "你更倾向于：", dimension: "TF", optionA: "公正和公平", optionB: "同情和理解" },
                    { question: "你更擅长：", dimension: "TF", optionA: "批判性思维", optionB: "同理心和关怀" },
                    
                    // 判断(J) vs 感知(P) 维度
                    { question: "你更喜欢的生活方式是：", dimension: "JP", optionA: "有计划、有组织的", optionB: "灵活、随性的" },
                    { question: "你更倾向于：", dimension: "JP", optionA: "提前计划和安排", optionB: "随遇而安，灵活应对" },
                    { question: "你更喜欢：", dimension: "JP", optionA: "快速做出决定", optionB: "保持开放选择" },
                    { question: "你更注重：", dimension: "JP", optionA: "结果和完成", optionB: "过程和体验" },
                    { question: "你更擅长：", dimension: "JP", optionA: "组织和规划", optionB: "适应和调整" },
                    { question: "你更喜欢的工作环境是：", dimension: "JP", optionA: "结构化和有序的", optionB: "灵活和自由的" },
                    { question: "你更倾向于：", dimension: "JP", optionA: "按计划行事", optionB: "根据情况调整" },
                    { question: "你更注重：", dimension: "JP", optionA: "完成任务", optionB: "探索可能性" },
                    { question: "你更擅长：", dimension: "JP", optionA: "制定和执行计划", optionB: "应对突发情况" },
                    { question: "你更喜欢：", dimension: "JP", optionA: "明确的目标和期限", optionB: "自由探索和发现" },
                    { question: "你更倾向于：", dimension: "JP", optionA: "完成任务后再放松", optionB: "边工作边享受" },
                    { question: "你更注重：", dimension: "JP", optionA: "决断和完成", optionB: "信息和选择" },
                    { question: "你更喜欢：", dimension: "JP", optionA: "有组织的工作方式", optionB: "自发的工作方式" },
                    { question: "你更倾向于：", dimension: "JP", optionA: "提前完成任务", optionB: "在截止日期前完成" }
                ],
                typeInfo: {
                    ISTJ: { name: "物流师", desc: "务实、注重事实，有责任感，做事有条理。" },
                    ISFJ: { name: "守护者", desc: "体贴、有同情心，勤奋尽责，保护他人。" },
                    INFJ: { name: "提倡者", desc: "有洞察力，富有想象力，专注于价值观和意义。" },
                    INTJ: { name: "建筑师", desc: "战略思想家，有远见，独立自主。" },
                    ISTP: { name: "鉴赏家", desc: "灵活务实，喜欢动手解决问题。" },
                    ISFP: { name: "探险家", desc: "温和敏感，享受当下，有艺术天赋。" },
                    INFP: { name: "调停者", desc: "理想主义，忠诚于自己的价值观。" },
                    INTP: { name: "逻辑学家", desc: "创新发明家，喜欢理论和抽象思维。" },
                    ESTP: { name: "企业家", desc: "精力充沛，聪明，享受冒险。" },
                    ESFP: { name: "表演者", desc: "自发、精力充沛，享受成为焦点。" },
                    ENFP: { name: "竞选者", desc: "热情、有创造力，社交能力强。" },
                    ENTP: { name: "辩论家", desc: "聪明好奇，喜欢智力挑战。" },
                    ESTJ: { name: "总经理", desc: "高效务实，注重传统和秩序。" },
                    ESFJ: { name: "执政官", desc: "有爱心，尽责，喜欢帮助他人。" },
                    ENFJ: { name: "主人公", desc: "有魅力，有灵感，善于说服。" },
                    ENTJ: { name: "指挥官", desc: "大胆、富有想象力，是天生的领导者。" }
                },
                careers: {
                    ISTJ: ["会计师", "审计员", "法律顾问", "项目经理", "军官", "银行家", "数据分析师", "系统管理员", "工程师", "药剂师"],
                    ISFJ: ["护士", "教师", "社工", "行政人员", "图书管理员", "牧师", "医生", "心理咨询师", "人力资源", "客户服务"],
                    INFJ: ["心理咨询师", "作家", "牧师", "职业顾问", "艺术家", "编辑", "教师", "人力资源", "社工", "研究员"],
                    INTJ: ["科学家", "工程师", "法官", "战略规划师", "建筑师", "投资顾问", "程序员", "教授", "研究员", "分析师"],
                    ISTP: ["飞行员", "运动员", "消防员", "工程师", "技术员", "侦探", "机械师", "摄影师", "程序员", "建筑师"],
                    ISFP: ["设计师", "园艺师", "兽医", "按摩师", "艺术家", "音乐家", "护士", "教师", "社工", "厨师"],
                    INFP: ["作家", "心理学家", "艺术家", "编辑", "社工", "翻译", "教师", "顾问", "研究员", "设计师"],
                    INTP: ["程序员", "建筑师", "教授", "研究员", "哲学家", "分析师", "工程师", "科学家", "作家", "顾问"],
                    ESTP: ["销售员", "营销人员", "警察", "企业家", "运动员", "经纪人", "消防员", "记者", "摄影师", "导游"],
                    ESFP: ["演员", "主持人", "旅游顾问", "幼师", "销售代表", "活动策划", "护士", "教练", "设计师", "音乐家"],
                    ENFP: ["记者", "顾问", "公关专员", "教练", "心理学家", "教师", "作家", "艺术家", "营销人员", "人力资源"],
                    ENTP: ["律师", "发明家", "摄影师", "投资顾问", "企业家", "顾问", "记者", "营销人员", "项目经理", "分析师"],
                    ESTJ: ["军官", "银行家", "项目经理", "校长", "法官", "行政总监", "警察", "销售经理", "工程师", "会计师"],
                    ESFJ: ["人力资源", "销售经理", "护士长", "酒店管理", "教师", "社工", "医生", "牧师", "行政人员", "客户服务"],
                    ENFJ: ["教师", "心理咨询师", "人力资源", "公关经理", "牧师", "教练", "作家", "艺术家", "顾问", "社工"],
                    ENTJ: ["CEO", "律师", "管理顾问", "政治家", "军官", "投资银行家", "项目经理", "企业家", "法官", "总监"]
                }
            }
        };

        // 应用状态
        let appState = {
            currentTest: null,
            currentQuestion: 0,
            answers: {
                holland: Array(tests.holland.questions.length).fill(null),
                mbti: Array(tests.mbti.questions.length).fill(null)
            },
            scores: {
                holland: { R: 0, I: 0, A: 0, S: 0, E: 0, C: 0 },
                mbti: { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 }
            },
            completedTests: [],
            startTime: null,
            timerInterval: null
        };

        // DOM元素
        const progressBar = document.getElementById('progress');
        const progressText = document.getElementById('progress-text');
        const progressPercent = document.getElementById('progress-percent');
        const timerElement = document.getElementById('timer');
        const startBtn = document.getElementById('start-btn');
        const restartBtn = document.getElementById('restart-btn');

        // 初始化
        function init() {
            // 设置测试卡片点击事件
            document.getElementById('holland-test').addEventListener('click', () => selectTest('holland'));
            document.getElementById('mbti-test').addEventListener('click', () => selectTest('mbti'));
            
            // 设置按钮事件
            startBtn.addEventListener('click', startSelectedTest);
            restartBtn.addEventListener('click', restartTest);
            
            // 设置测试导航按钮事件
            document.getElementById('mbti-prev-btn').addEventListener('click', () => previousQuestion('mbti'));
            document.getElementById('mbti-next-btn').addEventListener('click', () => nextQuestion('mbti'));
            document.getElementById('holland-prev-btn').addEventListener('click', () => previousQuestion('holland'));
            document.getElementById('holland-next-btn').addEventListener('click', () => nextQuestion('holland'));
        }

        // 选择测试类型
        function selectTest(testType) {
            document.querySelectorAll('.test-card').forEach(card => {
                card.classList.remove('selected');
            });
            document.getElementById(`${testType}-test`).classList.add('selected');
            
            appState.currentTest = testType;
            startBtn.disabled = false;
        }

        // 开始选定的测试
        function startSelectedTest() {
            if (!appState.currentTest) return;
            
            document.getElementById('welcome-section').classList.remove('active');
            document.getElementById(`${appState.currentTest}-test-section`).classList.add('active');
            
            appState.currentQuestion = 0;
            showQuestion(appState.currentTest, 0);
            updateProgress();
            
            // 开始计时
            startTimer();
        }

        // 开始计时
        function startTimer() {
            appState.startTime = new Date();
            appState.timerInterval = setInterval(updateTimer, 1000);
        }

        // 更新计时器
        function updateTimer() {
            if (!appState.startTime) return;
            
            const now = new Date();
            const diff = Math.floor((now - appState.startTime) / 1000);
            const minutes = Math.floor(diff / 60);
            const seconds = diff % 60;
            
            timerElement.textContent = `用时: ${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        // 停止计时
        function stopTimer() {
            if (appState.timerInterval) {
                clearInterval(appState.timerInterval);
                appState.timerInterval = null;
            }
        }

        // 显示问题
        function showQuestion(testType, questionIndex) {
            const test = tests[testType];
            const question = test.questions[questionIndex];
            const questionElement = document.getElementById(`${testType}-question-text`);
            const optionsContainer = document.getElementById(`${testType}-options-container`);
            
            questionElement.textContent = `第${questionIndex + 1}题 / 共${test.questions.length}题：${question.question}`;
            optionsContainer.innerHTML = '';
            
            if (testType === 'holland') {
                const options = ["非常不喜欢", "不喜欢", "一般", "喜欢", "非常喜欢"];
                options.forEach((option, index) => {
                    const optionElement = document.createElement('div');
                    optionElement.className = `option ${appState.answers[testType][questionIndex] === index ? 'selected' : ''}`;
                    optionElement.innerHTML = `<div class="option-number">${index + 1}</div><div>${option}</div>`;
                    optionElement.addEventListener('click', () => selectOption(testType, questionIndex, index));
                    optionsContainer.appendChild(optionElement);
                });
            } else {
                const optionA = document.createElement('div');
                optionA.className = `option ${appState.answers[testType][questionIndex] === 'A' ? 'selected' : ''}`;
                optionA.innerHTML = `<div class="option-number">A</div><div>${question.optionA}</div>`;
                optionA.addEventListener('click', () => selectOption(testType, questionIndex, 'A'));
                
                const optionB = document.createElement('div');
                optionB.className = `option ${appState.answers[testType][questionIndex] === 'B' ? 'selected' : ''}`;
                optionB.innerHTML = `<div class="option-number">B</div><div>${question.optionB}</div>`;
                optionB.addEventListener('click', () => selectOption(testType, questionIndex, 'B'));
                
                optionsContainer.appendChild(optionA);
                optionsContainer.appendChild(optionB);
            }
            
            updateButtonState(testType);
            updateProgress();
        }

        // 选择选项
        function selectOption(testType, questionIndex, optionIndex) {
            appState.answers[testType][questionIndex] = optionIndex;
            showQuestion(testType, questionIndex);
            
            setTimeout(() => {
                if (questionIndex < tests[testType].questions.length - 1) {
                    nextQuestion(testType);
                } else {
                    // 最后一题回答后，确保进度显示100%
                    forceCompleteProgress(testType);
                    setTimeout(() => calculateResults(testType), 100);
                }
            }, 200);
        }

        // 强制完成进度显示
        function forceCompleteProgress(testType) {
            const test = tests[testType];
            const totalQuestions = test.questions.length;
            
            progressBar.style.width = '100%';
            progressText.textContent = `${test.name} - 已完成 ${totalQuestions}/${totalQuestions}`;
            progressPercent.textContent = '100%';
        }

        // 下一题
        function nextQuestion(testType) {
            if (appState.currentQuestion < tests[testType].questions.length - 1) {
                appState.currentQuestion++;
                showQuestion(testType, appState.currentQuestion);
            } else {
                calculateResults(testType);
            }
        }

        // 上一题
        function previousQuestion(testType) {
            if (appState.currentQuestion > 0) {
                appState.currentQuestion--;
                showQuestion(testType, appState.currentQuestion);
            }
        }

        // 更新按钮状态
        function updateButtonState(testType) {
            const prevBtn = document.getElementById(`${testType}-prev-btn`);
            const nextBtn = document.getElementById(`${testType}-next-btn`);
            
            prevBtn.disabled = appState.currentQuestion === 0;
            
            if (appState.currentQuestion === tests[testType].questions.length - 1) {
                nextBtn.innerHTML = `查看结果<i class="fas fa-arrow-right"></i>`;
            } else {
                nextBtn.innerHTML = `下一题<i class="fas fa-arrow-right"></i>`;
            }
        }

        // 更新进度
        function updateProgress() {
            if (!appState.currentTest) {
                progressBar.style.width = '0%';
                progressText.textContent = '选择测试类型';
                progressPercent.textContent = '0%';
                return;
            }
            
            const test = tests[appState.currentTest];
            const totalQuestions = test.questions.length;
            const currentQuestionIndex = appState.currentQuestion;
            
            let completedQuestions = currentQuestionIndex;
            if (appState.answers[appState.currentTest][currentQuestionIndex] !== null) {
                completedQuestions++;
            }
            
            const progress = Math.min(100, (completedQuestions / totalQuestions) * 100);
            
            progressBar.style.width = `${progress}%`;
            progressText.textContent = `${test.name} - 已完成 ${completedQuestions}/${totalQuestions}`;
            progressPercent.textContent = `${Math.round(progress)}%`;
        }

        // 计算结果
        function calculateResults(testType) {
            console.log(`开始计算${testType}测试结果`);
            
            if (testType === 'holland') {
                Object.keys(appState.scores.holland).forEach(key => {
                    appState.scores.holland[key] = 0;
                });
                
                appState.answers.holland.forEach((answer, index) => {
                    if (answer !== null) {
                        const type = tests.holland.questions[index].type;
                        appState.scores.holland[type] += answer + 1;
                    }
                });
                
                console.log('霍兰德分数:', appState.scores.holland);
            } else {
                Object.keys(appState.scores.mbti).forEach(key => {
                    appState.scores.mbti[key] = 0;
                });
                
                appState.answers.mbti.forEach((answer, index) => {
                    if (answer !== null) {
                        const dimension = tests.mbti.questions[index].dimension;
                        const optionA = dimension[0];
                        const optionB = dimension[1];
                        
                        if (answer === 'A') {
                            appState.scores.mbti[optionA]++;
                        } else {
                            appState.scores.mbti[optionB]++;
                        }
                    }
                });
                
                console.log('MBTI分数:', appState.scores.mbti);
            }
            
            if (!appState.completedTests.includes(testType)) {
                appState.completedTests.push(testType);
            }
            
            // 停止计时
            stopTimer();
            
            if (appState.completedTests.length === 2) {
                showCombinedResults();
            } else {
                document.getElementById(`${testType}-test-section`).classList.remove('active');
                document.getElementById('welcome-section').classList.add('active');
                appState.currentTest = null;
                appState.currentQuestion = 0;
                updateProgress();
                alert(`您已完成${tests[testType].name}！请继续完成另一个测试以获得完整分析。`);
            }
        }

        // 显示综合结果
        function showCombinedResults() {
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById('result-section').classList.add('active');
            
            const mbtiScores = appState.scores.mbti;
            const mbtiType = 
                (mbtiScores.E > mbtiScores.I ? 'E' : 'I') +
                (mbtiScores.S > mbtiScores.N ? 'S' : 'N') +
                (mbtiScores.T > mbtiScores.F ? 'T' : 'F') +
                (mbtiScores.J > mbtiScores.P ? 'J' : 'P');
            
            const hollandScores = appState.scores.holland;
            const hollandTypes = Object.keys(hollandScores).sort((a, b) => hollandScores[b] - hollandScores[a]);
            const hollandCode = hollandTypes.slice(0, 3).join('');
            
            document.getElementById('mbti-code').textContent = mbtiType;
            document.getElementById('holland-code').textContent = hollandCode;
            
            generateCombinedDescription(mbtiType, hollandCode);
            generateCareerRecommendations(mbtiType, hollandCode);
            drawCharts(mbtiType, hollandCode);
        }

        // 生成综合描述
        function generateCombinedDescription(mbtiType, hollandCode) {
            const mbtiInfo = tests.mbti.typeInfo[mbtiType];
            const hollandTypes = hollandCode.split('');
            const hollandInfo = hollandTypes.map(type => tests.holland.typeInfo[type]);
            
            let description = `
                <h3>您的性格类型：${mbtiInfo.name} (${mbtiType})</h3>
                <p>${mbtiInfo.desc}</p>
                <h3 style="margin-top: 20px;">您的职业兴趣：${hollandTypes.map((t, i) => tests.holland.typeInfo[t].name).join('、')}</h3>
                <p>${hollandInfo.map(info => info.desc).join(' ')}</p>
                <h3 style="margin-top: 20px;">综合分析</h3>
                <p>您的${mbtiInfo.name}性格与${hollandTypes.map(t => tests.holland.typeInfo[t].name).join('、')}职业兴趣相结合，表明您适合在能够${getCombinedTraits(mbtiType, hollandCode)}的环境中工作。</p>
            `;
            
            document.getElementById('combined-description').innerHTML = description;
        }

        // 获取综合特质
        function getCombinedTraits(mbtiType, hollandCode) {
            const traits = [];
            
            if (mbtiType.includes('E')) traits.push('与人互动');
            if (mbtiType.includes('I')) traits.push('独立工作');
            if (mbtiType.includes('S')) traits.push('处理具体事务');
            if (mbtiType.includes('N')) traits.push('探索可能性');
            if (mbtiType.includes('T')) traits.push('逻辑分析');
            if (mbtiType.includes('F')) traits.push('帮助他人');
            if (mbtiType.includes('J')) traits.push('有组织有计划');
            if (mbtiType.includes('P')) traits.push('灵活适应');
            
            if (hollandCode.includes('R')) traits.push('动手操作');
            if (hollandCode.includes('I')) traits.push('研究分析');
            if (hollandCode.includes('A')) traits.push('创意表达');
            if (hollandCode.includes('S')) traits.push('服务他人');
            if (hollandCode.includes('E')) traits.push('领导影响');
            if (hollandCode.includes('C')) traits.push('遵循规程');
            
            return [...new Set(traits)].slice(0, 4).join('、');
        }

        // 生成职业推荐
        function generateCareerRecommendations(mbtiType, hollandCode) {
            const mbtiCareers = tests.mbti.careers[mbtiType] || [];
            const hollandCareers = [];
            
            hollandCode.split('').forEach(type => {
                hollandCareers.push(...tests.holland.careers[type]);
            });
            
            const allCareers = [...new Set([...mbtiCareers, ...hollandCareers])];
            const recommendedCareers = allCareers.slice(0, 12);
            
            const container = document.getElementById('career-recommendations');
            container.innerHTML = '';
            
            const mbtiInfo = tests.mbti.typeInfo[mbtiType];
            const hollandTypes = hollandCode.split('');
            
            recommendedCareers.forEach(career => {
                const card = document.createElement('div');
                card.className = 'recommendation-card';
                card.innerHTML = `
                    <h4><i class="fas fa-briefcase"></i>${career}</h4>
                    <p>适合${mbtiInfo.name}性格与${hollandTypes.map(t => tests.holland.typeInfo[t].name).join('、')}兴趣的组合</p>
                `;
                container.appendChild(card);
            });
        }

        // 绘制图表
        function drawCharts(mbtiType, hollandCode) {
            // MBTI雷达图
            const mbtiCtx = document.getElementById('mbtiChart').getContext('2d');
            const mbtiScores = appState.scores.mbti;
            
            const mbtiData = [
                (mbtiScores.E / (mbtiScores.E + mbtiScores.I)) * 100,
                (mbtiScores.S / (mbtiScores.S + mbtiScores.N)) * 100,
                (mbtiScores.T / (mbtiScores.T + mbtiScores.F)) * 100,
                (mbtiScores.J / (mbtiScores.J + mbtiScores.P)) * 100
            ];
            
            new Chart(mbtiCtx, {
                type: 'radar',
                data: {
                    labels: ['外向(E)', '实感(S)', '思考(T)', '判断(J)'],
                    datasets: [{
                        label: '偏好程度',
                        data: mbtiData,
                        backgroundColor: 'rgba(52, 152, 219, 0.2)',
                        borderColor: 'rgba(52, 152, 219, 1)',
                        borderWidth: 2,
                        pointBackgroundColor: 'rgba(52, 152, 219, 1)'
                    }]
                },
                options: {
                    scales: {
                        r: {
                            beginAtZero: true,
                            max: 100,
                            ticks: { display: false }
                        }
                    },
                    plugins: { legend: { display: false } }
                }
            });
            
            // 霍兰德条形图
            const hollandCtx = document.getElementById('hollandChart').getContext('2d');
            const hollandScores = appState.scores.holland;
            
            new Chart(hollandCtx, {
                type: 'bar',
                data: {
                    labels: ['现实型(R)', '研究型(I)', '艺术型(A)', '社会型(S)', '企业型(E)', '常规型(C)'],
                    datasets: [{
                        label: '兴趣得分',
                        data: [
                            hollandScores.R,
                            hollandScores.I,
                            hollandScores.A,
                            hollandScores.S,
                            hollandScores.E,
                            hollandScores.C
                        ],
                        backgroundColor: [
                            'rgba(231, 76, 60, 0.7)',
                            'rgba(52, 152, 219, 0.7)',
                            'rgba(155, 89, 182, 0.7)',
                            'rgba(39, 174, 96, 0.7)',
                            'rgba(243, 156, 18, 0.7)',
                            'rgba(149, 165, 166, 0.7)'
                        ],
                        borderColor: [
                            'rgba(231, 76, 60, 1)',
                            'rgba(52, 152, 219, 1)',
                            'rgba(155, 89, 182, 1)',
                            'rgba(39, 174, 96, 1)',
                            'rgba(243, 156, 18, 1)',
                            'rgba(149, 165, 166, 1)'
                        ],
                        borderWidth: 1
                    }]
                },
                options: {
                    scales: {
                        y: {
                            beginAtZero: true,
                            title: { display: true, text: '得分' }
                        }
                    },
                    plugins: { legend: { display: false } }
                }
            });
        }

        // 重新开始测试
        function restartTest() {
            appState = {
                currentTest: null,
                currentQuestion: 0,
                answers: {
                    holland: Array(tests.holland.questions.length).fill(null),
                    mbti: Array(tests.mbti.questions.length).fill(null)
                },
                scores: {
                    holland: { R: 0, I: 0, A: 0, S: 0, E: 0, C: 0 },
                    mbti: { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 }
                },
                completedTests: [],
                startTime: null,
                timerInterval: null
            };
            
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById('welcome-section').classList.add('active');
            
            updateProgress();
            document.querySelectorAll('.test-card').forEach(card => {
                card.classList.remove('selected');
            });
            startBtn.disabled = true;
            
            // 重置计时器
            stopTimer();
            timerElement.textContent = '用时: 00:00';
        }

        // 初始化应用
        window.onload = init;
    </script>
</body>
</html>